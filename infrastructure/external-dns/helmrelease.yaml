---
# yaml-language-server: $schema=https://raw.githubusercontent.com/kubernetes-sigs/external-dns/master/charts/external-dns/values.schema.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: &app external-dns
  namespace: *app
spec:
  chart:
    spec:
      chart: *app
      version: 1.14.5
      sourceRef:
        kind: HelmRepository
        name: *app
        namespace: flux-system
  interval: 30m
  releaseName: *app
  targetNamespace: *app
  values:
    pihole:
      ## @param pihole.server When using the Pi-hole provider, specify The address of the Pi-hole web server
      ##
      server: "192.168.178.91/admin" # "pihole.internal.tmem.de"
      ## @param pihole.tlsSkipVerify When using the Pi-hole provider, specify whether to skip verification of any TLS certificates served by the Pi-hole web server
      ##
      tlsSkipVerify: "true"
      ## @param pihole.secretName Use an existing secret with key "pihole_password" defined.
      ##
      secretName: "pihole-dns"
    domainFilters:
      - internal.tmem.de
